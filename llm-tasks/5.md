# 5 â€“ Canvas toolbar with drawing tools

Related issue(s): GH-5
Source of truth for task status: the external issue tracker.

---

## Task Summary

Add a toolbar in the top left corner of the canvas with tool options like a drawing app. Initial tool: rectangle tool to add new events by clicking and dragging.

---

## Current Understanding

* Toolbar positioned in top-left corner of the canvas area
* Two tools: Select (default) and Rectangle
* Rectangle tool: click and drag to create a new event
  * X-axis drag defines `_valid_from` and `_valid_to`
  * Y-axis (bottom of drag) defines `_system_from`
* New events created with slate-500 color

---

## What We Need to Do

**Completed:**
1. ~~Add tool state (`:current-tool` in main state)~~
2. ~~Create toolbar component with select and rectangle buttons~~
3. ~~Modify mouse handlers to check current tool~~
4. ~~Implement rectangle drawing mode (`:draw` mode in drag-state)~~
5. ~~Create event on mouse-up when in draw mode~~

**Future extensions:**
* Add more tools (delete, duplicate, etc.)
* Keyboard shortcuts for tool switching

---

## Important Learnings

* Toolbar is absolutely positioned inside the canvas container
* Drawing uses the same selection-box preview mechanism
* New events get a default slate-500 color
* Minimum drag distance (0.02) prevents accidental creation

---

## Important Files / Components

* `src/app/app.cljs`:
  * `:current-tool` in state - `:select` or `:rectangle`
  * `toolbar` component - tool buttons with SVG icons
  * `set-tool!` - switches current tool
  * `:draw` mode in drag-state for rectangle drawing
  * `create-event-from-drag!` - creates event from drag coordinates

---

## Reasoning Notes

Initial document creation for task 5.

Implementation complete. Toolbar styled like a drawing app with icon buttons that highlight when active.
